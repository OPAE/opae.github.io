

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>packager &mdash; OPAE</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="OPAE" href="../../../index.html"/>
        <link rel="next" title="userclk" href="../userclk/userclk.html"/>
        <link rel="prev" title="mmlink" href="../mmlink/mmlink.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> OPAE
          

          
          </a>

          
            
            
              <div class="version">
                0.13.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">OPAE User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/quick_start/readme.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install_guide/installation_guide.html">OPAE Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/prog_guide/readme.html">OPAE C API Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ase_userguide/ase_userguide.html">OPAE AFU Simulation Environment (ASE) User Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">OPAE Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../build_chain/fpga_api/api_build.html">Building the OPAE C Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/fpga_api.html">OPAE C API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">OPAE Linux Kernel Drivers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../drv_arch/drv_arch.html">OPAE Intel® FPGA Linux Device Driver Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drv_arch/drv_arch.html#sysfs-files">sysfs files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build_chain/fpga_driver/driver_build.html">Building the OPAE Intel FPGA driver (in-tree)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../build_chain/fpga_driver/driver_build.html#building-the-opae-intel-fpga-driver-out-of-tree">Building the OPAE Intel FPGA driver (out-of-tree)</a></li>
</ul>
<p class="caption"><span class="caption-text">OPAE FPGA Tools</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../coreidle/coreidle.html">coreidle</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgabist/fpgabist.html">fpgabist</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgainfo/fpgainfo.html">fpgainfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgaconf/fpgaconf.html">fpgaconf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgad/fpgad.html">fpgad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgadiag/README.html">fpgadiag</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgaflash/fpgaflash.html">fpgaflash</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgamux/fpgamux.html">fpgamux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgaport/fpgaport.html">fpgaport</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mmlink/mmlink.html">mmlink</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">packager</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#description">DESCRIPTION</a></li>
<li class="toctree-l2"><a class="reference internal" href="#packager-interface">PACKAGER INTERFACE</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accelerator-description-file">Accelerator Description File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../userclk/userclk.html">userclk</a></li>
</ul>
<p class="caption"><span class="caption-text">OPAE AFU Tools</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hssi_config/readme.html">hssi_config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hssi_loopback/readme.html">hssi_loopback</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OPAE</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
      <li>packager</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/docs/fpga_tools/packager/packager.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="packager">
<h1>packager<a class="headerlink" href="#packager" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">packager</span> <span class="pre">&lt;cmd&gt;</span> <span class="pre">[options]</span></code></p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The packager provides tools to help AFU developers create Accelerator
Function files. The Accelerator Function file is the programming file
for an AFU in the Intel® Acceleration Stack for FPGAs platform. It
includes metadata the packager tool generates and a raw binary file
(.rbf) that the Intel Quartus Prime software generates.</p>
<p>Currently, the packager’s only function is to create an AFU file. Refer
to Section 2 for more information about the packager. The packager
depends on a JSON file to describe AFU metadata. Refer to Section 3 for
more information about the JASON file.</p>
<p><strong>The packager requires Python 2.7.1 and Python 2.7.3. The tool
indicates if it is being called with a compatible version of Python.</strong></p>
</div>
<div class="section" id="packager-interface">
<h2>PACKAGER INTERFACE<a class="headerlink" href="#packager-interface" title="Permalink to this headline">¶</a></h2>
<p>The packager is a command line tool with the following interface:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">&lt;CMD&gt;</span> <span class="pre">[options]</span></code></p>
<p>To display the list of commands for the packager, run:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">help</span></code></p>
<p>To display help for a specific command, run:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">&lt;CMD&gt;</span> <span class="pre">--help</span></code></p>
<p>To display the version of the packager tool, run:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">version</span></code></p>
<p>To generate an AFU file, run:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">create-gbs</span> <span class="pre">--rbf=&lt;RBF_PATH&gt;</span> <span class="pre">--afu=&lt;AFU_JSON_PATH&gt;</span> <span class="pre">--gbs=&lt;GBS_PATH&gt;</span></code></p>
<blockquote>
<div>is the path to the RBF file for the AFU. The Quartus Prime software</div></blockquote>
<p>generates this RBF by compiling the AFU. is the path to the Accelerator
Description file. This is a JSON file that describes the metadata that
is appended to the AFU. is the path to the RBF file for the FPGA
interface manager (FIM) that contains the FPGA interface unit and other
interfaces.</p>
<p><strong>TIP</strong>: JSON files can be very particular about things like trailing
commas. If you’re getting errors, try using jsonlint.com to validate
that your JSON is formatted correctly.</p>
<p>To modify metadata in an existing AFU file, run the following command:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">modify-gbs</span> <span class="pre">--input-gbs=&lt;PATH_TO_GBS_TO_BE_MODIFIED&gt;</span> <span class="pre">--outputgbs=&lt;NAME_FOR_NEW_GBS&gt;</span> <span class="pre">--set-value</span> <span class="pre">&lt;key&gt;:&lt;value&gt;</span></code></p>
<p>You can pass in a number of : pairs with –set-value to update values in
“afu- image”.</p>
<p>To print the metadata of an existing AFU:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">get-info</span> <span class="pre">--gbs=&lt;GBS_PATH&gt;</span></code></p>
<p>To extract the RBF from the AFU:</p>
<p><code class="docutils literal"><span class="pre">$</span> <span class="pre">packager</span> <span class="pre">get-rbf</span> <span class="pre">--gbs=&lt;GBS_PATH&gt;</span> <span class="pre">--rbf=&lt;NAME_FOR_RBF&gt;</span></code></p>
</div>
<div class="section" id="accelerator-description-file">
<h2>Accelerator Description File<a class="headerlink" href="#accelerator-description-file" title="Permalink to this headline">¶</a></h2>
<p>This Accelerator Description File is a JSON file that describes an AFU.
Its currently describes the metadata associated with a AFU. This
metadata is used by the OPAE during reconfiguration. Here is an example
file:</p>
<div class="highlight-c"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s">&quot;version&quot;</span><span class="o">:</span> <span class="mi">1</span>
   <span class="s">&quot;platform-name&quot;</span><span class="o">:</span> <span class="s">&quot;DCP&quot;</span><span class="p">,</span>
   <span class="s">&quot;afu-image&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s">&quot;magic-no&quot;</span><span class="o">:</span> <span class="mi">488605312</span><span class="p">,</span>
      <span class="s">&quot;interface-uuid&quot;</span><span class="o">:</span> <span class="s">&quot;576c885b-0a4f-549b-ca2e-3b2e12d579f7&quot;</span><span class="p">,</span>
      <span class="s">&quot;clock-frequency-low&quot;</span><span class="o">:</span> <span class="s">&quot;50&quot;</span><span class="p">,</span>
      <span class="s">&quot;clock-frequency-high&quot;</span><span class="o">:</span> <span class="s">&quot;200&quot;</span><span class="p">,</span>
      <span class="s">&quot;power&quot;</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span>
      <span class="s">&quot;afc-clusters&quot;</span><span class="o">:</span> <span class="p">[{</span>
         <span class="s">&quot;total-contexts&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
         <span class="s">&quot;name&quot;</span><span class="o">:</span> <span class="s">&quot;nlb_400&quot;</span><span class="p">,</span>
         <span class="s">&quot;afc-type-uuid&quot;</span><span class="o">:</span> <span class="s">&quot;c000c966-0d82-4272-9aef-fe5f84570612&quot;</span>
      <span class="p">}</span>
      <span class="p">]</span>
   <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The clock frequency fields are for OpenCL which requires PLL
reconfiguration. Quartus Prime compilation derives a set of PLL
parameter values to update the PLL Dynamic Reconfiguration Block. The
metadata stores these parameter values. After reprogramming the AFU
using partial reconfiguration (PR), the software driver reconfigures the
PLL by writing these parameter values over PCIe/CCI. No kernel space
floating point processing is necessary.</p>
<p><strong>Note the version field. This file format may change as the
architecture evolves. The version reflects changes to the file format.</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="13%" />
<col width="13%" />
<col width="31%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">CATEGORY</th>
<th class="head">NAME</th>
<th class="head">TYPE</th>
<th class="head">DESCRIPTION</th>
<th class="head">MANDATORY</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Per-AFU</td>
<td>versio
n</td>
<td>Intege
r</td>
<td>Version of the
metadata format.</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>Per-AFU</td>
<td>magic-
no
(to be
deprec
ated)</td>
<td>Intege
r</td>
<td>Magic no.
Associated with
the FPGA Interface
Manager.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>Per-AFU</td>
<td>platfo
rm-nam
e</td>
<td>String</td>
<td>Name of the
platform for which
the metadata is
intended. The
field value is
“DCP” for Intel®
Acceleration Stack
for FPGAs.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>Per-AFU</td>
<td>interf
ace-uu
id</td>
<td>UUID</td>
<td>Interface id
associated with
the FPGA Interface
Manager.</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>Per-AFU</td>
<td>power</td>
<td>Intege
r</td>
<td>Accelerator
Function power
consumption, in
watts. Set to 0
for Intel®
Acceleration Stack
for FPGAs
platforms.</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>Per-AFU</td>
<td>clock-
freque
ncy-lo
w</td>
<td>Float</td>
<td>Clock frequency
for 1st PLL (Clock
network)1 in MHz.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>Per-AFU</td>
<td>clock-
freque
ncy-hi
gh</td>
<td>Float</td>
<td>Clock frequency
for 2nd PLL (0 if
absent) in MHz.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>Per-AFC
Cluster</td>
<td>total-
contex
ts</td>
<td>Intege
r</td>
<td>Number of AFCs in
this cluster.
Always be 1 in
current
architectures.</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>Per-AFC
Cluster</td>
<td>afc-ty
pe-uui
d</td>
<td>UUID</td>
<td>AFC type = AFU ID
in current
architectures.</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>Per-AFC
Cluster</td>
<td>name</td>
<td>string</td>
<td>AFC name = AFU
name in current
architectures.</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../userclk/userclk.html" class="btn btn-neutral float-right" title="userclk" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../mmlink/mmlink.html" class="btn btn-neutral" title="mmlink" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 Intel Corporation.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.13.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>